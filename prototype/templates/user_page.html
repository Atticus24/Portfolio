<!DOCTYPE html>
<html>
  <head>
    <title>Landing</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link rel="stylesheet" type="text/css" href="../static/user_page.css">
  </head>
  <h1 align="center">Welcome {{user_name}}</h1>
  <body>
    <div class="card center-table" style="width: 18rem;">
      <div class="card-body">
        <h5 class="card-title">Loans for {{user_name}}</h5>
        <table class="table">
          <thead>
          <tr>
            <th scope="col">Name</th>
            <th scope="col">Identifier</th>
            <th scope="col">Stock</th>
          </tr>
          </thead>
          <tbody>
          {% for item in items %}
          <tr>
            <td>{{item.name}}</td>
            <td>{{item.identifier}}</td>
            <td>{{item.stock}}</td>
          </tr>
          {% endfor %}
          </tbody>
        </table>
        <form onsubmit="loanItem(event)" align="center">
          <select id="loan-item-select">
            {% for item in items %}
              <option value="{{item.name}}">{{item.identifier}}</option>
            {% endfor %}
          </select>
          <button type="submit">Return</button>
        </form>
      </div>
    </div>
    <div class="card center-table" style="width: 18rem;">
      <div class="card-body">
        <h5 class="card-title">Available items</h5>
        <table class="table">
          <thead>
            <tr>
              <th scope="col">Name</th>
              <th scope="col">Identifier</th>
              <th scope="col">Stock</th>
            </tr>
          </thead>
          <tbody>
            {% for item in items %}
              <tr>
                <td>{{item.name}}</td>
                <td>{{item.identifier}}</td>
                <td>{{item.stock}}</td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
        <form onsubmit="returnItem(event)" align="center">
          <select id="return-item-select">
            {% for item in items %}
            <option value="{{item.name}}">{{item.identifier}}</option>
            {% endfor %}
          </select>
          <button type="submit">Loan</button>
        </form>
      </div>
    </div>

<script>
    function loanItem(event) {
    event.preventDefault(); // prevent the form from submitting
    const selectedItem = document.getElementById('loan-item-select').value;
    // retrieve the selected item's information from the database or other source
    const item = { name: 'Item 1', identifier: 'A001', dueDate: '2022-01-01' };
    // update the second table
    const table = document.getElementsByClassName('borrowed-items')[0].getElementsByTagName('tbody')[0];
    const row = table.insertRow();
    row.insertCell().innerHTML = item.name;
    row.insertCell().innerHTML = item.identifier;
    row.insertCell().innerHTML = item.dueDate;
    // update the first table
    // subtract 1 from the in stock count of the selected item
    // or remove the item from the table if the in stock count is 0
    // or mark the item as borrowed in the first table
    }
</script>

  </body>
</html>
